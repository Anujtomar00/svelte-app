import{c as t}from"./singletons-a5656164.js";t.disable_scroll_handling;const y=t.goto;t.invalidate;const b=t.invalidateAll;t.prefetch;t.prefetch_routes;t.before_navigate;t.after_navigate;const f=t.apply_action;function _(e,p=()=>{}){const d=async({action:a,result:n})=>{n.type==="success"&&await b(),location.origin+location.pathname===a.origin+a.pathname&&f(n)};async function s(a){var h,u;a.preventDefault();const n=new URL((h=a.submitter)!=null&&h.hasAttribute("formaction")?a.submitter.formAction:e.action),r=new FormData(e),i=new AbortController;let l=!1;const g=(u=p({action:n,cancel:()=>l=!0,controller:i,data:r,form:e}))!=null?u:d;if(l)return;let c;try{c=await(await fetch(n,{method:"POST",headers:{accept:"application/json"},body:r,signal:i.signal})).json()}catch(o){if((o==null?void 0:o.name)==="AbortError")return;c={type:"error",error:o}}g({action:n,data:r,form:e,result:c,get type(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get location(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get error(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")}})}return e.addEventListener("submit",s),{destroy(){e.removeEventListener("submit",s)}}}export{f as a,_ as e,y as g};
