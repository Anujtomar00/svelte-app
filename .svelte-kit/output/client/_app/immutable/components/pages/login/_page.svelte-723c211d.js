import{S as J,i as K,s as Q,k as d,q as U,a as k,l as _,m as E,r as V,h,c as q,n,b as j,G as i,ae as X,f as N,t as C,d as Y,E as Z,I as ee,w as te,x as ae,y as re,u as se,z as oe,g as le,O as ne}from"../../../chunks/index-6c230a90.js";import{e as ie,a as ce,g as ue}from"../../../chunks/forms-c50a5f01.js";import{d as fe,s as R}from"../../../chunks/session-3dce4b9c.js";import{F as pe,e as me}from"../../../chunks/fa-f7b18daf.js";function W(m){let a,c,l,v,p=m[0].error+"",t,r;return l=new pe({props:{icon:me}}),{c(){a=d("div"),c=d("div"),te(l.$$.fragment),v=k(),t=U(p),this.h()},l(s){a=_(s,"DIV",{class:!0});var e=E(a);c=_(e,"DIV",{});var b=E(c);ae(l.$$.fragment,b),v=q(b),t=V(b,p),b.forEach(h),e.forEach(h),this.h()},h(){n(a,"class","alert alert-error")},m(s,e){j(s,a,e),i(a,c),re(l,c,null),i(c,v),i(c,t),r=!0},p(s,e){(!r||e&1)&&p!==(p=s[0].error+"")&&se(t,p)},i(s){r||(N(l.$$.fragment,s),r=!0)},o(s){C(l.$$.fragment,s),r=!1},d(s){s&&h(a),oe(l)}}}function de(m){var A;let a,c,l,v,p,t,r,s,e,b,S,P,y,x,w,I,D,L,T,F,z,o=((A=m[0])==null?void 0:A.error)&&W(m);return{c(){a=d("section"),c=d("div"),l=d("h1"),v=U("Log In"),p=k(),t=d("form"),o&&o.c(),r=k(),s=d("p"),e=d("input"),S=k(),P=d("p"),y=d("input"),x=k(),w=d("p"),I=d("button"),D=U("Log In"),this.h()},l(u){a=_(u,"SECTION",{class:!0});var f=E(a);c=_(f,"DIV",{class:!0});var O=E(c);l=_(O,"H1",{class:!0});var $=E(l);v=V($,"Log In"),$.forEach(h),O.forEach(h),p=q(f),t=_(f,"FORM",{class:!0,method:!0});var g=E(t);o&&o.l(g),r=q(g),s=_(g,"P",{});var B=E(s);e=_(B,"INPUT",{autocomplete:!0,autocorrect:!0,type:!0,name:!0,placeholder:!0,class:!0}),B.forEach(h),S=q(g),P=_(g,"P",{});var G=E(P);y=_(G,"INPUT",{autocomplete:!0,type:!0,name:!0,placeholder:!0,class:!0}),G.forEach(h),x=q(g),w=_(g,"P",{class:!0});var H=E(w);I=_(H,"BUTTON",{class:!0});var M=E(I);D=V(M,"Log In"),M.forEach(h),H.forEach(h),g.forEach(h),f.forEach(h),this.h()},h(){var u,f;n(l,"class",""),n(c,"class","prose"),n(e,"autocomplete","email"),n(e,"autocorrect","off"),n(e,"type","email"),n(e,"name","email"),n(e,"placeholder","Email..."),n(e,"class","input input-bordered w-full"),e.required=!0,e.value=b=(f=(u=m[0])==null?void 0:u.email)!=null?f:"",n(y,"autocomplete","current-password"),n(y,"type","password"),n(y,"name","password"),n(y,"placeholder","Password..."),n(y,"class","input input-bordered w-full"),y.required=!0,n(I,"class","btn btn-primary"),n(w,"class","flex items-center gap-6 mt-6"),n(t,"class","flex flex-col gap-6 my-6"),n(t,"method","POST"),n(a,"class","max-w-sm mx-auto")},m(u,f){j(u,a,f),i(a,c),i(c,l),i(l,v),i(a,p),i(a,t),o&&o.m(t,null),i(t,r),i(t,s),i(s,e),i(t,S),i(t,P),i(P,y),i(t,x),i(t,w),i(w,I),i(I,D),T=!0,F||(z=X(L=ie.call(null,t,m[3])),F=!0)},p(u,[f]){var O,$,g;(O=u[0])!=null&&O.error?o?(o.p(u,f),f&1&&N(o,1)):(o=W(u),o.c(),N(o,1),o.m(t,r)):o&&(le(),C(o,1,1,()=>{o=null}),Y()),(!T||f&1&&b!==(b=(g=($=u[0])==null?void 0:$.email)!=null?g:"")&&e.value!==b)&&(e.value=b),L&&Z(L.update)&&f&2&&L.update.call(null,u[3])},i(u){T||(N(o),T=!0)},o(u){C(o),T=!1},d(u){u&&h(a),o&&o.d(),F=!1,z()}}}function _e(m,a,c){let l;ee(m,R,r=>c(1,l=r));const v=fe("app:routes:login:page.svelte");let{form:p}=a;const t=()=>async({result:r})=>{var s;if(v("form result:",r),await ce(r),r.type==="success"){const e=(s=r.data)==null?void 0:s.user;e&&ne(R,l.user=e,l),await ue("/dashboard")}};return m.$$set=r=>{"form"in r&&c(0,p=r.form)},m.$$.update=()=>{m.$$.dirty&1&&v("form:",p)},[p,l,v,t]}class Ee extends J{constructor(a){super(),K(this,a,_e,de,Q,{form:0})}}export{Ee as default};
